
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mission Locale ‚Äì Parcours Pro</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#f4fbfc;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

#startScreen{
  position:fixed;
  inset:0;
  background:#f4fbfc;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10;
}

.start-card{
  background:white;
  padding:24px;
  border-radius:14px;
  max-width:420px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
}

.start-card h1{
  color:#0f7780;
}

.start-card button{
  margin-top:16px;
  padding:12px 20px;
  font-size:16px;
  font-weight:bold;
  background:#0f7780;
  color:white;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

.logo{
  position:fixed;
  top:10px;
  right:10px;
  width:160px;
}

#gameContainer{
  width:100%;
  max-width:900px;
}

canvas{
  width:100%;
  background:linear-gradient(#e9f7f8,#ffffff);
  border-radius:10px;
}

#hud{
  display:flex;
  justify-content:space-between;
  margin-top:8px;
  font-weight:bold;
}

#quizModal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  justify-content:center;
  align-items:center;
  z-index:20;
}

.quiz-card{
  background:white;
  padding:20px;
  border-radius:12px;
  max-width:400px;
}

.quiz-card h3{
  color:#0f7780;
}

.answer{
  margin-top:8px;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  cursor:pointer;
}
</style>
</head>

<body>

<img src="images/logo-mle.png" class="logo" alt="Logo Mission Locale">

<div id="startScreen">
  <div class="start-card">
    <h1>üéØ Parcours Pro ‚Äì Mission Locale</h1>
    <p>
      √âvite les obstacles et avance le plus loin possible.<br><br>
      üëâ Si tu touches un obstacle, une question professionnelle appara√Æt.<br>
      ‚úî Bonne r√©ponse : tu continues<br>
      ‚ùå Mauvaise r√©ponse : le score revient √† 0
    </p>
    <p>
      Sauter : clic ou espace<br>
      Certains obstacles se passent sans sauter
    </p>
    <button id="startBtn">D√©marrer le jeu</button>
  </div>
</div>

<div id="gameContainer">
  <canvas id="game" width="900" height="300"></canvas>
  <div id="hud">
    <div>Score : <span id="score">0</span></div>
    <div>Niveau : <span id="level">1</span></div>
  </div>
</div>

<div id="quizModal">
  <div class="quiz-card">
    <h3 id="quizQuestion"></h3>
    <div id="quizAnswers"></div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let running=false;
let score=0;
let level=1;
let speed=3;

const player={
  x:80,
  y:210,
  r:16,
  vy:0,
  jump:false
};

let obstacles=[];
let airObstacles=[];

const questions=[
 {q:"Que doit-on apporter √† un entretien ?",a:["Un CV","Une console","Rien"],c:0},
 {q:"Arriver √† l‚Äôheure signifie ?",a:["10 minutes avant","En retard","Quand on veut"],c:0},
 {q:"√Ä quoi sert un stage ?",a:["D√©couvrir un m√©tier","Jouer","Ne rien faire"],c:0},
 {q:"Que faire si on ne comprend pas ?",a:["Demander","Faire semblant","Partir"],c:0},
 {q:"Quel comportement est professionnel ?",a:["Dire bonjour","Crier","T√©l√©phone"],c:0}
];

function drawPlayer(){
  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fillStyle="#0f7780";
  ctx.fill();
  ctx.fillStyle="white";
  ctx.font="12px Arial";
  ctx.fillText("MLE",player.x-12,player.y+4);
}

function spawnObstacle(){
  obstacles.push({x:canvas.width,y:230,w:30,h:30});
}

function spawnAir(){
  airObstacles.push({x:canvas.width,y:140,w:40,h:25});
}

function showQuiz(){
  running=false;
  const q=questions[Math.floor(Math.random()*questions.length)];
  document.getElementById("quizQuestion").textContent=q.q;
  const ansDiv=document.getElementById("quizAnswers");
  ansDiv.innerHTML="";
  q.a.forEach((txt,i)=>{
    const d=document.createElement("div");
    d.className="answer";
    d.textContent=txt;
    d.onclick=()=>{
      document.getElementById("quizModal").style.display="none";
      if(i!==q.c) score=0;
      running=true;
      loop();
    };
    ansDiv.appendChild(d);
  });
  document.getElementById("quizModal").style.display="flex";
}

function loop(){
  if(!running) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  player.vy+=0.8;
  player.y+=player.vy;
  if(player.y>210){player.y=210;player.vy=0;player.jump=false;}

  if(Math.random()<0.02) spawnObstacle();
  if(level>=4 && Math.random()<0.01) spawnAir();

  obstacles.forEach(o=>{
    o.x-=speed;
    ctx.fillStyle="#333";
    ctx.fillRect(o.x,o.y,o.w,o.h);
    if(o.x<player.x+player.r && o.x+o.w>player.x-player.r && player.y+player.r>o.y){
      showQuiz();
    }
  });

  airObstacles.forEach(o=>{
    o.x-=speed;
    ctx.fillStyle="#ff9800";
    ctx.fillRect(o.x,o.y,o.w,o.h);
    if(player.jump && o.x<player.x+player.r && o.x+o.w>player.x-player.r){
      showQuiz();
    }
  });

  drawPlayer();

  score++;
  if(score%300===0){level++;speed+=0.4;}

  document.getElementById("score").textContent=score;
  document.getElementById("level").textContent=level;

  requestAnimationFrame(loop);
}

document.addEventListener("keydown",e=>{
  if(e.code==="Space" && !player.jump){
    player.jump=true;
    player.vy=-14;
  }
});

canvas.addEventListener("click",()=>{
  if(!player.jump){
    player.jump=true;
    player.vy=-14;
  }
});

document.getElementById("startBtn").onclick=()=>{
  document.getElementById("startScreen").style.display="none";
  running=true;
  loop();
};
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MLE Runner – Mission Locale</title>
<style>
body{margin:0;font-family:Arial;background:#e3f2fd;display:flex;justify-content:center}
#container{width:100%;max-width:900px}
header{background:#1e88e5;color:#fff;padding:10px;display:flex;justify-content:space-between;font-size:14px}
canvas{background:#f5f7fb;display:block}
.overlay{position:absolute;inset:0;background:rgba(255,255,255,.95);display:flex;align-items:center;justify-content:center}
.box{background:#fff;padding:20px;border-radius:12px;max-width:500px;width:100%;text-align:center}
button{padding:12px 20px;border:none;border-radius:20px;background:#fdd835;font-size:16px;cursor:pointer}
.answers button{background:#1e88e5;color:#fff;margin-top:8px;width:100%}
#wrapper{position:relative}
</style>
</head>
<body>
<div id="container">
<header>
<div id="consigne">Saute pour éviter les obstacles</div>
<div id="score">Score : 0 | Niveau : 1</div>
</header>
<div id="wrapper">
<canvas id="game" width="900" height="400"></canvas>
<div class="overlay" id="start">
<div class="box">
<h2>MLE Runner</h2>
<p>Espace ou touche écran pour sauter.<br>Jeu infini – bats ton score.</p>
<button id="btnStart">Démarrer</button>
</div>
</div>
<div class="overlay" id="quiz" style="display:none">
<div class="box">
<h3 id="q"></h3>
<div class="answers" id="a"></div>
</div>
</div>
</div>
</div>
<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
let running=false,score=0,level=1,speed=4;
const player={x:80,y:300,r:22,vy:0};
let obstacles=[];
const questions=[
{q:"À quoi sert un CV ?",a:["Se présenter","Jouer","Dessiner"],c:0},
{q:"Pourquoi préparer un entretien ?",a:["Être à l'aise","Improviser","Dormir"],c:0}
];
function start(){document.getElementById('start').style.display='none';reset();running=true;loop();}
function reset(){score=0;level=1;speed=4;obstacles=[];player.y=300;player.vy=0;}
function addObs(){const air=level>=5&&Math.random()<0.3;obstacles.push({x:canvas.width,y:air?240:320,w:30,h:air?30:50});}
function loop(){if(!running)return;ctx.clearRect(0,0,900,400);
player.vy+=0.6;player.y+=player.vy;if(player.y>300){player.y=300;player.vy=0}
ctx.beginPath();ctx.arc(player.x,player.y,player.r,0,Math.PI*2);ctx.fillStyle='#ffb74d';ctx.fill();ctx.strokeStyle='#1e88e5';ctx.lineWidth=4;ctx.stroke();ctx.fillStyle='#000';ctx.textAlign='center';ctx.fillText('MLE',player.x,player.y+4);
obstacles.forEach(o=>{o.x-=speed;ctx.fillStyle=o.y<300?'#e53935':'#fdd835';ctx.fillRect(o.x,o.y,o.w,o.h);
if(o.x<player.x+player.r&&o.x+o.w>player.x-player.r&&o.y<player.y+player.r&&o.y+o.h>player.y-player.r){lose();}});
obstacles=obstacles.filter(o=>o.x+o.w>0);
if(Math.random()<0.02)addObs();score++;if(score%500===0){level++;speed+=0.5}
document.getElementById('score').innerText=`Score : ${score} | Niveau : ${level}`;
requestAnimationFrame(loop);}
function lose(){running=false;showQuiz();}
function showQuiz(){const qu=questions[Math.floor(Math.random()*questions.length)];document.getElementById('quiz').style.display='flex';document.getElementById('q').innerText=qu.q;const a=document.getElementById('a');a.innerHTML='';qu.a.forEach((t,i)=>{const b=document.createElement('button');b.innerText=t;b.onclick=()=>{document.getElementById('quiz').style.display='none';if(i===qu.c){running=true;loop()}else{start()}};a.appendChild(b);});}
document.getElementById('btnStart').onclick=start;
window.addEventListener('keydown',e=>{if(e.code==='Space')player.vy=-12});
canvas.addEventListener('touchstart',()=>player.vy=-12);
</script>
</body>
</html>


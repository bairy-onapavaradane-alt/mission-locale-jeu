<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mission Locale â€“ Jeu MLE</title>

<style>
:root{
  --primary:#0f7780;
  --bg:#eef7f8;
}

*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}

body{
  margin:0;
  background:var(--bg);
  text-align:center;
} <img src="images/logo-mle.png" alt="Logo Mission Locale">
  

/* ===== MENU ===== */
#menu{
  position:fixed;
  inset:0;
  background:var(--bg);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10;
}

.menu-card{
  background:white;
  padding:24px;
  border-radius:14px;
  max-width:420px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}

.menu-card h1{color:var(--primary)}

.menu-card button{
  margin-top:16px;
  padding:14px 24px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:var(--primary);
  color:white;
  font-weight:bold;
  cursor:pointer;
}

/* ===== JEU ===== */
canvas{
  background:white;
  border-radius:12px;
  display:block;
  margin:20px auto;
}

#hud{
  font-weight:bold;
  margin-bottom:20px;
}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu">
  <div class="menu-card">
    <h1>ðŸŽ¯ Parcours Pro â€“ Mission Locale</h1>
    <p>
      Aide la mascotte MLE Ã  avancer dans son parcours professionnel.<br><br>
      ðŸ‘‰ Clique, touche lâ€™Ã©cran ou appuie sur ESPACE pour sauter.<br>
      ðŸ‘‰ Ã‰vite les obstacles.<br>
      ðŸ‘‰ Si tu touches un obstacle, rÃ©pond Ã  une question.<br>
      ðŸ‘‰ Mauvaise rÃ©ponse : score remis Ã  zÃ©ro.
    </p>
    <button id="startBtn">DÃ©marrer le jeu</button>
  </div>
</div>

<!-- JEU -->
<canvas id="game" width="900" height="300"></canvas>

<div id="hud">
  Score : <span id="score">0</span> |
  Niveau : <span id="level">1</span>
</div>

<script>
/* ===== INITIALISATION ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let playing=false;
let score=0;
let level=1;
let speed=4;
let frame=0;

/* ===== PERSONNAGE (ROND MLE) ===== */
const player={
  x:90,
  y:210,
  r:22,
  vy:0,
  jumping:false
};

/* ===== OBSTACLES ===== */
let obstacles=[];

/* ===== QUESTIONS ===== */
const questions=[
 {q:"Ã€ quoi sert la Mission Locale ?",a:["Aider les jeunes","Vendre des jeux"],c:0},
 {q:"Que faut-il pour un entretien ?",a:["CV et ponctualitÃ©","ÃŠtre en retard"],c:0},
 {q:"Pourquoi faire un stage ?",a:["DÃ©couvrir un mÃ©tier","Perdre du temps"],c:0}
];

/* ===== FOND AVEC MOTS ===== */
const words=["CV","Emploi","Stage","Formation","Projet","Mission Locale","Entretien"];

/* ===== FONCTIONS ===== */
function jump(){
  if(!player.jumping){
    player.vy=-15;
    player.jumping=true;
  }
}

function spawnObstacle(){
  obstacles.push({x:canvas.width,y:230,w:30,h:30});
}

function showQuiz(){
  playing=false;
  const q=questions[Math.floor(Math.random()*questions.length)];
  const ok=confirm(
    q.q+"\n\nOK : "+q.a[0]+"\nAnnuler : "+q.a[1]
  );
  if(!ok) score=0;
  playing=true;
}

function drawBackground(){
  ctx.globalAlpha=0.08;
  ctx.fillStyle="#0f7780";
  ctx.font="20px Arial";
  words.forEach((w,i)=>{
    ctx.fillText(w,(frame*0.3+i*140)%canvas.width,50+(i%4)*40);
  });
  ctx.globalAlpha=1;
}

/* ===== BOUCLE DU JEU ===== */
function gameLoop(){
  if(!playing) return;

  frame++;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawBackground();

  /* sol */
  ctx.fillStyle="#ddd";
  ctx.fillRect(0,250,canvas.width,4);

  /* joueur */
  player.vy+=0.9;
  player.y+=player.vy;
  if(player.y>210){
    player.y=210;
    player.vy=0;
    player.jumping=false;
  }

  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fillStyle="#0f7780";
  ctx.fill();

  ctx.fillStyle="white";
  ctx.font="bold 14px Arial";
  ctx.textAlign="center";
  ctx.fillText("MLE",player.x,player.y+5);

  /* obstacles */
  if(Math.random()<0.02) spawnObstacle();

  obstacles.forEach(o=>{
    o.x-=speed;
    ctx.fillStyle="#333";
    ctx.fillRect(o.x,o.y,o.w,o.h);

    if(
      o.x < player.x+player.r &&
      o.x+o.w > player.x-player.r &&
      player.y+player.r > o.y
    ){
      obstacles=[];
      showQuiz();
    }
  });

  obstacles=obstacles.filter(o=>o.x>-50);

  /* score / niveau */
  score++;
  if(score%500===0){
    level++;
    speed+=0.6;
  }

  document.getElementById("score").textContent=score;
  document.getElementById("level").textContent=level;

  requestAnimationFrame(gameLoop);
}

/* ===== CONTROLES ===== */
document.getElementById("startBtn").onclick=()=>{
  document.getElementById("menu").style.display="none";
  playing=true;
  gameLoop();
};

document.addEventListener("keydown",e=>{
  if(e.code==="Space") jump();
});

canvas.addEventListener("click",jump);
canvas.addEventListener("touchstart",e=>{
  e.preventDefault();
  jump();
},{passive:false});
</script>

</body>
</html>

